@model App.ViewModels.TaskViewModel

@{
    ViewBag.Title = "title";
    Layout = "_Layout";
}

<style >
    body{
    background-color:  #C0DCEC;
    color: white;
    size: landscape;    
   }
   text {
   color: white;
   }
   form{
   width: 400px;
   }
   .container {
       display: flex;
   }
   nav{
        height: 45px;
        }
  
</style>
<body>
<div class="container"  style="margin-top: 20px; "  >
    
    <div >
        <h1 class="display-3" style="margin-bottom: 20px">@Model.Title</h1>
        @if (Model.Deadline == DateTime.MinValue)
        {
            @using(Html.BeginForm("SetDeadline", "TaskView", FormMethod.Get))
            {
                <p>
                    <input type="date" id="date" name="deadline"/>
                </p>
                <button style="background-color: #60bcdc; width: 200px; border-color: darkturquoise; border-radius: 12px " type="submit" class="btn btn-primary">Submit</button>
            }
        }
        else
        {
            <div class="card" style="width: 18rem; height: 45px">
                <div class="card-body">
                    
                        <h6 style="color: #60bcdc">@Model.Deadline.Date</h6>
                   
                </div>
            </div>
            
        }


        @if (Model.AssignedUsers.Count!=0)
        {
            <div class="card" style="width: 18rem; margin-top: 10px">
                <div class="card-body" >
                
                    @foreach (var user in Model.AssignedUsers)
                    {
                        <h6 style="color: #60bcdc">@user.Nickname</h6>
                    }
                </div>
            </div>
        }
        
        <div class="card" style="width: 18rem; margin-top: 25px">
            <div class="card-body">

                <h6 style="color: #60bcdc">Add user</h6>

                @foreach (var user in ViewBag.projectUsers)
                {
                    <a style="color: #60bcdc" href='@Url.Action("AssignUserToTask", "TaskView", new {username = user.Nickname})'>
                        <h6 style="color: #C0DCEC;"> @user.Nickname</h6>

                    </a>
                }
                <button style="background-color: #60bcdc; margin-top: 15px; width: 200px; border-radius: 12px; border-color:#C0DCEC" type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">
                              @if (Model.RmStep == null)
                              {
                                  <h5>Choose step</h5>
                              }
                              else
                              {
                                  <h5>@Model.RmStep.Title</h5>
                              }
                            </button>

            </div>
        </div>
    </div>
    @*
    <img style="margin-left: 200px" src="https://www.pinclipart.com/picdir/big/67-672993_asana-timeline-asana-timeline-asana-timeline-asana-illustration.png" width="400">
    *@
    <img style="margin-left: 200px; margin-top: 20px" src="https://static.tildacdn.com/tild3366-6537-4262-a465-653833363134/CTA_Graphics1.png" width="570">
</div>


</body>

<div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #a4dfed; ">
                <h5 class="modal-title" id="staticBackdropLabel">Set roadmap step</h5>
            </div>
            <div class="modal-body">
                @foreach (var step in ViewBag.Steps)
                  {
                      <a style="color: #60bcdc" href='@Url.Action("LinkTaskToStep", new {stepId = step.Id})'>
                          <h5>@step.Title</h5>
                      </a>
                  }

                </div>
            

        </div>
    </div>
</div>

<script>
$('#myModal').on('shown.bs.modal', function () {
  $('#myInput').trigger('focus')
})
</script>